---
layout: post
title: "LL(1)文法-消除左递归和提取左因子"
description: ""
category: 编译原理
tags: [编译原理,语法分析]
---

当文法不是LL(1)文法时，需要对文法进行改造。选用自顶向下分析时，需要对文法进行等价变化，以便能用来构造预测分析表。

### 消除左递归

左递归会是分析进入到无限循环之中，所以要消除文法中的左递归。

左递归分为直接左递归和间接左递归。

直接左递归形如： A → α

间接左递归形如：

> S → Qc|c  
> Q → Rb|b  
> R → Sa|a

#### 消除直接左递归

简单的左递归产生式 A → Aα|β  
可用下面的非左递归产生式替换：

> A → βA'  
> A' → αA' | ε

对于一般的直接左递归产生式： A → Aα<sub>1</sub>|Aα<sub>2</sub>|...|Aα<sub>m</sub>|β<sub>1</sub>|β<sub>2</sub>|...|β<sub>n</sub>  
可用下面的非左递归产生式替换：

> A → β<sub>1</sub>A'|β<sub>2</sub>A'|...|β<sub>n</sub>A'  
> A' → α<sub>1</sub>A'|α<sub>2</sub>A'|...|α<sub>m</sub>A'|ε

**注意:**消除左递归式，最后面的 **ε** 不要忘记。

#### 消除间接左递归

上面的间接左递归之所以形成左递归式因为：S ⇒ Qc ⇒ Rbc ⇒ Sabc 形成左递归，但不是直接的左递归。

1.  将非终结符排序：S，Q，R。
2.  Q中不存在左递归，将Q带入S中:
    
    S → Rbc | bc | c

3.  R中不存在左递归，将R带入S中：
    
    S → Sabc | abc | bc | c

4.  得到了直接左递归，然后只要消除直接左递归就可以了。
    
    > S → abcS' | bcS' | c S'  
    > S' → abcS' | ε

### 提取左因子

提取左因子比较简单。

比如文法 A → aB|aC。

遇到A 时，到底是A → aB 还是 A → aC ?

提取左因子：

对于形如： A → αβ<sub>1</sub>|αβ<sub>2</sub>|...|αβ<sub>n</sub>|γ

改写为：

> A → αA' | γ  
> A' → β<sub>1</sub>|β<sub>2</sub>|...|β<sub>n</sub> [1]: ../assets/images/CodeCogsEqn1.png